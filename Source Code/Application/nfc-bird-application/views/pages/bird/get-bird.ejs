<div id="get-bird">
    <div class="container" v-if="!cloudSuccess">
        <div class="flex-container">
            <button class="btn btn-dark" @click="openCreateBirdModal" v-if="me.hasCreateEdit || me.hasEditFull">Register
            New Bird</button>
            <button class="btn btn-dark" data-toggle="modal" data-target="#createUserModal" @click="storeCurrent">More Fields</button>
            <button class="btn btn-dark" @click="exportToExcel" v-if="me.hasExport">Export</button>
        </div>
        <div class="flex-container filterbar" style="display:inline-flex !important">
            <div class="form-group search-box">
                <input id="birdName" class="form-control" type="text" v-model.trim="currentBirdFilter" placeholder="Bird Name" title="birdName" autocomplete="off">
                <autocomplete for="birdName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
            </div>

            <div class="form-group search-box">
                <select id="sex" class="form-control" type="text" v-model="currentSexFilter" placeholder="sex" title="sex" autocomplete="off">
               <option disabled selected value="">Gender</option>
               <option value="male">Male</option>
               <option value="female">Female</option>
               <option value="unknown">Unknown</option>
            </select>
            </div>
            <div class="form-group search-box">
                <input id="studID" class="form-control" type="text" v-model.trim="currentBirdIdFilter" placeholder="Stud ID" title="studID" autocomplete="off">
                <autocomplete for="studID" action="getBird" params='{"limit": 5}' map="studID" is-async> </autocomplete>
            </div>

            <div class="form-group search-box" v-if="formData.newstudid">
                <input id="newStudID" class="form-control" type="text" v-model.trim="currentNewStudIdFilter" placeholder="New Stud ID" title="new Stud ID" autocomplete="off">
                <autocomplete for="newStudID" action="getBird" params='{"limit": 5}' map="newStudID" is-async> </autocomplete>
            </div>

            <div class="form-group search-box" v-if="formData.lring">
                <input id="leftRingID" class="form-control" type="text" v-model.trim="currentLeftRingFilter" placeholder="Left Ring ID" title="left Ring ID" autocomplete="off">
                <autocomplete for="leftRingID" action="getBird" params='{"limit": 5}' map="leftRingID" is-async> </autocomplete>
            </div>
            <div class="form-group search-box" v-if="formData.rring">
                <input id="rightRingID" class="form-control" type="text" v-model.trim="currentRightRingFilter" placeholder="Right Ring ID" title="right Ring ID" autocomplete="off">
                <autocomplete for="rightRingID" action="getBird" params='{"limit": 5}' map="rightRingID" is-async> </autocomplete>
            </div>

            <div class="form-group search-box" v-if="formData.creator">
               <input id="createdBy" class="form-control" type="text" v-model.trim="currentCreatorFilter" placeholder="Created By" title="created By" autocomplete="off">
               <autocomplete for="createdBy" action="getUser" params='{"limit": 5}' map="username" is-async> </autocomplete>
           </div>


            <div class="form-group search-box">
                <input id="motherName" class="form-control" type="text" v-model.trim="currentMotherFilter" placeholder="Mother" title="mother Name" autocomplete="off">
                <autocomplete for="motherName" action="getBird" params='{"limit": 5}' map="motherName" is-async>
                </autocomplete>
            </div>
            <div class="form-group search-box">
                <input id="fatherName" class="form-control" type="text" v-model.trim="currentFatherFilter" placeholder="Father" title="father Name" autocomplete="off">
                <autocomplete for="fatherName" action="getBird" params='{"limit": 5}' map="fatherName" is-async>
                </autocomplete>
            </div>
            <div class="form-group search-box" v-if="formData.status">
                <input id="status" class="form-control" type="text" v-model.trim="currentStatusFilter" placeholder="status" title="status" autocomplete="off">
                <autocomplete for="status" action="getBird" params='{"limit": 5}' map="status" is-async> </autocomplete>
            </div>

            <div class="form-group search-box" v-if="formData.laidwhere">
               <input id="laidWhere" class="form-control" type="text" v-model.trim="currentLaidWhereFilter" placeholder="Where Laid" title="laidWhere" autocomplete="off">
               <autocomplete for="laidWhere" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
           </div>

            <div class="form-group search-box" v-if="formData.hatchwhere">
                <input id="hatchedWhere" class="form-control" type="text" v-model.trim="currentHatchWhereFilter" placeholder="Where Hatched" title="hatched Where" autocomplete="off">
                <autocomplete for="hatchedWhere" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
            </div>

            <div class="form-group search-box" v-if="formData.fledgewhere">
               <input id="fledgedWhere" class="form-control" type="text" v-model.trim="currentFledgeWhereFilter" placeholder="Where Fledged" title="fledged Where" autocomplete="off">
               <autocomplete for="fledgedWhere" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
           </div>

           <div class="form-group search-box" v-if="formData.releasedwhere">
            <input id="releasedWhere" class="form-control" type="text" v-model.trim="currentreleasedWhereFilter" placeholder="Where Released" title="released Where" autocomplete="off">
            <autocomplete for="releasedWhere" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
        </div>

            <div class="form-group search-box">
                <select id="isBreeder" class="form-control" type="text" v-model.trim="currentBreederFilter" placeholder="Breeder" title="is Breeder" autocomplete="off">
               <option disabled selected value="">Breeder</option>
               <option value="no">No</option>
               <option value="yes">Yes</option>
               <option value="unknown">unknown</option>
            </select>
            </div>
            <!-- <div class="form-group">
                 <input id="isBreeder" class="form-control" type="text" v-model.trim="currentBreederFilter" placeholder="isBreeder" title="isBreeder" autocomplete="off">
                 <autocomplete for="isBreeder" action="getBird" params='{"limit": 3}' map="isBreeder" is-async> </autocomplete>
                 </div> -->
            <div class="form-group search-box" v-IF="formData.currnestID">
                <input id="currentNestSite" class="form-control" type="text" v-model.trim="currentNestSiteFilter" placeholder="current Nest Site" title="currentNestSite" autocomplete="off">
                <autocomplete for="currentNestSite" action="getNestsite" params='{"limit": 3}' map="nestID" is-async>
                </autocomplete>
            </div>

            <div class="form-group">
                <button class="btn btn-secondary" @click="clearFilters">Clear</button>
            </div>
        </div>
        <table class="table table-bordered table-condensed table-hover text-nowrap">
            <thead role="rowgroup">
                <tr class="birdheader back-green" role="row">
                    <th role="columnheader" v-show="formData.name">
                        Bird Name
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'birdName' || (currentSortItem === 'birdName' && currentSortDirection === 'DESC')" @click="setSortItem('birdName', 'DESC')" alt="Sort by Bird Name Descending" title="Sort by Bird Name Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'birdName' || (currentSortItem === 'birdName' && currentSortDirection === 'ASC')" @click="setSortItem('birdName', 'ASC')" alt="Sort by Bird Name Ascending" title="Sort by Bird Name Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.id">System ID</th>
                    <th role="columnheader" v-show="formData.sex">
                        Gender
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'sex' || (currentSortItem === 'sex' && currentSortDirection === 'DESC')" @click="setSortItem('sex', 'DESC')" alt="Sort by Gender Descending" title="Sort by Gender Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'sex' || (currentSortItem === 'sex' && currentSortDirection === 'ASC')" @click="setSortItem('sex', 'ASC')" alt="Sort by Gender Ascending" title="Sort by Gender Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.breeder">
                        Breeder
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'isBreeder' || (currentSortItem === 'isBreeder' && currentSortDirection === 'DESC')" @click="setSortItem('isBreeder', 'DESC')" alt="Sort by Breeder Descending" title="Sort by Breeder Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'isBreeder' || (currentSortItem === 'isBreeder' && currentSortDirection === 'ASC')" @click="setSortItem('isBreeder', 'ASC')" alt="Sort by Breeder Ascending" title="Sort by Breeder Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.lastSeen">Last Seen Date</th>
                    <th role="columnheader" v-show="formData.studid">
                        Stud ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'studID' || (currentSortItem === 'studID' && currentSortDirection === 'DESC')" @click="setSortItem('studID', 'DESC')" alt="Sort by Stud ID Descending" title="Sort by Stud ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'studID' || (currentSortItem === 'studID' && currentSortDirection === 'ASC')" @click="setSortItem('studID', 'ASC')" alt="Sort by Stud ID Ascending" title="Sort by Stud ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.newstudid">
                        New Stud ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'newStudID' || (currentSortItem === 'newStudID' && currentSortDirection === 'DESC')" @click="setSortItem('newStudID', 'DESC')" alt="Sort by New Stud ID Descending" title="Sort by New Stud ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'newStudID' || (currentSortItem === 'newStudID' && currentSortDirection === 'ASC')" @click="setSortItem('newStudID', 'ASC')" alt="Sort by New Stud ID Ascending" title="Sort by New Stud ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.nfcRingAssigned">Has NFC Ring</th>
                    <th role="columnheader" v-show="formData.nfcRing">NFC Ring Printed ID</th>
                    <th role="columnheader" v-show="formData.lring">
                        Left Ring ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'leftRingID' || (currentSortItem === 'leftRingID' && currentSortDirection === 'DESC')" @click="setSortItem('leftRingID', 'DESC')" alt="Sort by Left Ring ID Descending" title="Sort by Left Ring ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'leftRingID' || (currentSortItem === 'leftRingID' && currentSortDirection === 'ASC')" @click="setSortItem('leftRingID', 'ASC')" alt="Sort by Left Ring ID Ascending" title="Sort by Left Ring ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.rring">
                        Right Ring ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'rightRingID' || (currentSortItem === 'rightRingID' && currentSortDirection === 'DESC')" @click="setSortItem('rightRingID', 'DESC')" alt="Sort by Right Ring ID Descending" title="Sort by Right Ring ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'rightRingID' || (currentSortItem === 'rightRingID' && currentSortDirection === 'ASC')" @click="setSortItem('rightRingID', 'ASC')" alt="Sort by Right Ring ID Ascending" title="Sort by Right Ring ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.creator">Created By</th>
                    <th role="columnheader" v-show="formData.mname">
                        Mother
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'motherName' || (currentSortItem === 'motherName' && currentSortDirection === 'DESC')" @click="setSortItem('motherName', 'DESC')" alt="Sort by Femalre Parent Name Descending" title="Sort by Femalre Parent Name Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'motherName' || (currentSortItem === 'motherName' && currentSortDirection === 'ASC')" @click="setSortItem('motherName', 'ASC')" alt="Sort by Femalre Parent Name Ascending" title="Sort by Femalre Parent Name Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.mstud">
                        Mother Stud ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'motherStudID' || (currentSortItem === 'motherStudID' && currentSortDirection === 'DESC')" @click="setSortItem('motherStudID', 'DESC')" alt="Sort by Femalre Parent Stud ID Descending" title="Sort by Femalre Parent Stud ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'motherStudID' || (currentSortItem === 'motherStudID' && currentSortDirection === 'ASC')" @click="setSortItem('motherStudID', 'ASC')" alt="Sort by Femalre Parent Stud ID Ascending" title="Sort by Femalre Parent Stud ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.fname">
                        Father
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'fatherName' || (currentSortItem === 'fatherName' && currentSortDirection === 'DESC')" @click="setSortItem('fatherName', 'DESC')" alt="Sort by Father Name Descending" title="Sort by Father Name Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'fatherName' || (currentSortItem === 'fatherName' && currentSortDirection === 'ASC')" @click="setSortItem('fatherName', 'ASC')" alt="Sort by Father Name Ascending" title="Sort by Father Name Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.fstud">
                        Father Stud ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'fatherStudID' || (currentSortItem === 'fatherStudID' && currentSortDirection === 'DESC')" @click="setSortItem('fatherStudID', 'DESC')" alt="Sort by Father Stud ID Descending" title="Sort by Father Stud ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'fatherStudID' || (currentSortItem === 'fatherStudID' && currentSortDirection === 'ASC')" @click="setSortItem('fatherStudID', 'ASC')" alt="Sort by Father Stud ID Ascending" title="Sort by Father Stud ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.sfname">
                        Second Father
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'secondFatherName' || (currentSortItem === 'secondFatherName' && currentSortDirection === 'DESC')" @click="setSortItem('secondFatherName', 'DESC')" alt="Sort by Second Father Name Descending"
                            title="Sort by Second Father Name Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'secondFatherName' || (currentSortItem === 'secondFatherName' && currentSortDirection === 'ASC')" @click="setSortItem('secondFatherName', 'ASC')" alt="Sort by Second Father Name Ascending"
                            title="Sort by Second Father Name Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.sfstud">
                        Second Father Stud ID
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'secondFatherStudID' || (currentSortItem === 'secondFatherStudID' && currentSortDirection === 'DESC')" @click="setSortItem('secondFatherStudID', 'DESC')" alt="Sort by Second Father Stud ID Descending"
                            title="Sort by Second Father Stud ID Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'secondFatherStudID' || (currentSortItem === 'secondFatherStudID' && currentSortDirection === 'ASC')" @click="setSortItem('secondFatherStudID', 'ASC')" alt="Sort by Second Father Stud ID Ascending"
                            title="Sort by Second Father Stud ID Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.status">
                        Status
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'status' || (currentSortItem === 'status' && currentSortDirection === 'DESC')" @click="setSortItem('status', 'DESC')" alt="Sort by Status Descending" title="Sort by Status Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'status' || (currentSortItem === 'status' && currentSortDirection === 'ASC')" @click="setSortItem('status', 'ASC')" alt="Sort by Status Ascending" title="Sort by Status Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.cnote"> Latest Condition</th>
                    <th role="columnheader" v-show="formData.rnote">
                        Latest Notes
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'researcherNotes' || (currentSortItem === 'researcherNotes' && currentSortDirection === 'DESC')" @click="setSortItem('researcherNotes', 'DESC')" alt="Sort by Notes Descending" title="Sort by Notes Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'researcherNotes' || (currentSortItem === 'researcherNotes' && currentSortDirection === 'ASC')" @click="setSortItem('researcherNotes', 'ASC')" alt="Sort by Notes Ascending" title="Sort by Notes Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.age">
                        Age
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'hatchDate' || (currentSortItem === 'hatchDate' && currentSortDirection === 'ASC')" @click="setSortItem('hatchDate', 'ASC')" alt="Sort by Age Ascending" title="Sort by Age Ascending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'hatchDate' || (currentSortItem === 'hatchDate' && currentSortDirection === 'DESC')" @click="setSortItem('hatchDate', 'DESC')" alt="Sort by Age Descending" title="Sort by Age Descending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.lay">
                        Lay Date
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'layDate' || (currentSortItem === 'layDate' && currentSortDirection === 'DESC')" @click="setSortItem('layDate', 'DESC')" alt="Sort by Lay Date Descending" title="Sort by Lay Date Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'layDate' || (currentSortItem === 'layDate' && currentSortDirection === 'ASC')" @click="setSortItem('layDate', 'ASC')" alt="Sort by Lay Date Ascending" title="Sort by Lay Date Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.laidwhere">Where Laid</th>
                    <th role="columnheader" v-show="formData.hatchdate">
                        Hatch Date
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'hatchDate' || (currentSortItem === 'hatchDate' && currentSortDirection === 'DESC')" @click="setSortItem('hatchDate', 'DESC')" alt="Sort by Hatch Date Descending" title="Sort by Hatch Date Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'hatchDate' || (currentSortItem === 'hatchDate' && currentSortDirection === 'ASC')" @click="setSortItem('hatchDate', 'ASC')" alt="Sort by Hatch Date Ascending" title="Sort by Hatch Date Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.hatchwhere">Where Hatched</th>
                    <th role="columnheader" v-show="formData.incdays">
                        Incubation Days
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'incubationDays' || (currentSortItem === 'incubationDays' && currentSortDirection === 'DESC')" @click="setSortItem('incubationDays', 'DESC')" alt="Sort by Incubation Days Descending" title="Sort by Incubation Days Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'incubationDays' || (currentSortItem === 'incubationDays' && currentSortDirection === 'ASC')" @click="setSortItem('incubationDays', 'ASC')" alt="Sort by Incubation Days Ascending" title="Sort by Incubation Days Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.fledgedate">
                        Fledge Date
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'fledgeDate' || (currentSortItem === 'fledgeDate' && currentSortDirection === 'DESC')" @click="setSortItem('fledgeDate', 'DESC')" alt="Sort by Fledge Date Descending" title="Sort by Fledge Date Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'fledgeDate' || (currentSortItem === 'fledgeDate' && currentSortDirection === 'ASC')" @click="setSortItem('fledgeDate', 'ASC')" alt="Sort by Fledge Date Ascending" title="Sort by Fledge Date Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.fledgewhere">Where Fledged</th>
                    <th role="columnheader" v-show="formData.releasedate">
                        Release Date
                        <i class="fas fa-chevron-down fa-xs" v-show="currentSortItem !== 'releasedWhen' || (currentSortItem === 'releasedWhen' && currentSortDirection === 'DESC')" @click="setSortItem('releasedWhen', 'DESC')" alt="Sort by Release Date Descending" title="Sort by Release Date Descending"></i>
                        <i class="fas fa-chevron-up fa-xs" v-show="currentSortItem !== 'releasedWhen' || (currentSortItem === 'releasedWhen' && currentSortDirection === 'ASC')" @click="setSortItem('releasedWhen', 'ASC')" alt="Sort by Release Date Ascending" title="Sort by Release Date Ascending"></i>
                    </th>
                    <th role="columnheader" v-show="formData.releasedwhere">Where Release</th>
                    <th role="columnheader" v-show="formData.currnestID">Current Breeding Site</th>
                    <th role="columnheader" v-show="formData.currnestDist">Distance To Hopper (km)</th>
                    <th role="columnheader" v-show="formData.currnestDisc">Site Description</th>
                    <th role="columnheader" v-show="formData.currnestCord">Coordinates</th>

                    <!-- <th role="columnheader" v-show="formData.currnestLat">Current Breeding Latitude</th> -->


                    <th role="columnheader" v-show="formData.prevnestID">Previous Breeding Site</th>
                    <th role="columnheader" v-show="formData.prevnestDist">Distance To Hopper (km)</th>
                    <th role="columnheader" v-show="formData.prevnestDisc">Site Description</th>
                    <th role="columnheader" v-show="formData.prevnestCord">Coordinates</th>

                    <!-- <th role="columnheader" v-show="formData.prevnestLat">Previous Breeding Latitude</th> -->

                </tr>
            </thead>
            <tbody role="rowgroup">
                <tr style="cursor:pointer;" class="clickable-row" @click="clickOpenExampleModalButton3(index)" v-for="(bird, index) in currentBirds">
                    <td class="birdJustifyColumn" v-if="formData.name">{{bird.birdName}}</td>
                    <td v-if="formData.id">{{bird.id}}</td>
                    <td v-if="formData.sex">{{bird.sex}}</td>
                    <td v-if="formData.breeder">{{bird.isBreeder}}</td>
                    <td v-if="formData.lastSeen">
                        {{bird.visitHistory[0] ? new Date(bird.visitHistory[0].createdAt *1000).toLocaleDateString('en-GB') : '' }}
                    </td>
                    <td v-if="formData.studid">{{bird.studID}}</td>
                    <td v-if="formData.newstudid">{{bird.newStudID}}</td>
                    <td v-if="formData.nfcRingAssigned">{{ bird.nfcRingID ? 'Yes' : 'No' }}</td>
                    <td v-if="formData.nfcRing">{{ bird.nfcRingID ? bird.nfcRingID : '' }}</td>
                    <td v-if="formData.lring">{{bird.leftRingID}}</td>
                    <td v-if="formData.rring">{{bird.rightRingID}}</td>
                    <td v-if="formData.creator">{{bird.createdBy.fullName}}</td>
                    <td v-if="formData.mname">{{bird.motherName}}</td>
                    <td v-if="formData.mstud">{{bird.motherStudID}}</td>
                    <td v-if="formData.fname">{{bird.fatherName}}</td>
                    <td v-if="formData.fstud">{{bird.fatherStudID}}</td>
                    <td v-if="formData.sfname">{{bird.secondFatherName}}</td>
                    <td v-if="formData.sfstud">{{bird.secondFatherStudID}}</td>
                    <td v-if="formData.status">{{bird.status}}</td>
                    <td class="text-wrap" v-if="formData.cnote">{{bird.conditionHistory[0] ? bird.conditionHistory[0].birdCondition : '' }}
                    </td>
                    <td class="text-wrap" v-if="formData.rnote">{{bird.researcherNotes }}</td>
                    <td v-if="formData.age">{{bird.age}}</td>
                    <td v-if="formData.lay">{{new Date(bird.layDate*1000).toLocaleDateString('en-GB') }}</td>
                    <td v-if="formData.laidwhere">{{bird.laidWhere ? bird.laidWhere.nestID : '' }}</td>
                    <td v-if="formData.hatchdate">{{new Date(bird.hatchDate*1000).toLocaleDateString('en-GB') }}</td>
                    <td v-if="formData.hatchwhere">{{bird.hatchedWhere ? bird.hatchedWhere.nestID : '' }}</td>
                    <td v-if="formData.incdays">{{ bird.incubationDays }}</td>
                    <td v-if="formData.fledgedate">{{new Date(bird.fledgeDate*1000).toLocaleDateString('en-GB') }}</td>
                    <td v-if="formData.fledgewhere">{{bird.fledgedWhere ? bird.fledgedWhere.nestID : '' }}</td>
                    <td v-if="formData.releasedate">{{new Date(bird.releasedWhen*1000).toLocaleDateString('en-GB') }}</td>
                    <td v-if="formData.releasedwhere">{{bird.releasedWhere ? bird.releasedWhere.nestID : '' }}</td>
                    <td v-if="formData.currnestID">
                        {{bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.nestID : '' }}
                    </td>
                    <td v-if="formData.currnestDist">
                        {{bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.distanceToHoppersKm : '' }}
                    </td>
                    <td class="text-wrap" v-if="formData.currnestDisc">
                        {{bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.nestDescription : '' }}
                    </td>
                    <td v-if="formData.currnestCord">
                        {{(bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.longitude +", " : '' ) + (bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.latitude
                        : '' )}}
                    </td>

                    <td v-if="formData.prevnestID">
                        {{bird.nestsiteHistory && bird.nestsiteHistory[1] && bird.nestsiteHistory[1].nestID ? bird.nestsiteHistory[1].nestID.nestID : '' }}
                    </td>
                    <td v-if="formData.prevnestDist">
                     {{bird.nestsiteHistory && bird.nestsiteHistory[1] && bird.nestsiteHistory[1].nestID ? bird.nestsiteHistory[1].nestID.distanceToHoppersKm : '' }}
                    </td>
                    <td class="text-wrap" v-if="formData.prevnestDisc">
                        {{bird.nestsiteHistory && bird.nestsiteHistory[1] && bird.nestsiteHistory[1].nestID ? bird.nestsiteHistory[1].nestID.nestDescription : '' }}
                    </td>
                    <td v-if="formData.prevnestCord">
                        {{(bird.nestsiteHistory && bird.nestsiteHistory[1] && bird.nestsiteHistory[1].nestID ? bird.nestsiteHistory[1].nestID.longitude +", " : '' ) + (bird.nestsiteHistory && bird.nestsiteHistory[1] && bird.nestsiteHistory[1].nestID ? bird.nestsiteHistory[1].nestID.latitude
                        : '' )}}
                    </td>

                </tr>
            </tbody>
        </table>
        <footer id="page-footer" class="navbar navbar-expand-sm navbar-dark bg-dark flex-column flex-md-row justify-content-between position-fixed footernav">
            <div class="flex-container paginateContainer">
                <div>
                    <paginate ref="paginate" :page-count="Math.ceil(BirdCount / pageSize)" :click-handler="pageClick" :prev-text="'Prev'" :next-text="'Next'" :container-class="'pagination'" :page-class="'page-item'" :page-link-class="'page-link'" :prev-class="'ignore page-item'"
                        :prev-link-class="'page-link'" :next-class="'ignore page-item'" :next-link-class="'page-link'" :disabled-class="'ignore disabled'">
                    </paginate>
                </div>
            </div>
            <div class="font-white">Showing {{currentBirds.length}} entries out of {{BirdCount}}</div>
            <div class="nav-item dropdown d-none d-sm-block font-white">
                Show
                <select class="pageSizeControl custom-select" v-model="pageSize" style="width: auto; margin: 0px 5px;">
               <option value="5">5</option>
               <option value="10">10</option>
               <option selected value="15">15</option>
               <option value="20">20</option>
               <option value="25">25</option>
               <option value="30">30</option>
               <option value="10000">All</option>
            </select> entries
            </div>
        </footer>
        <router-view></router-view>
        <div class="modal fade" id="createUserModal" tabindex="-1" role="dialog" aria-labelledby="createUserModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
                        <h5 class="modal-title" id="createUserModalLabel">Select Columns to View</h5>
                        <hr>
                        </br>
                        <div class="form-group">
                            <table class="table table-bordered" style="text-align:left;" id="privilege" width="100%">
                                <tbody>
                                    <tr>
                                        <td>
                                            <div style="font-weight:bold; text-align: center;">Brid Identity Data</div>
                                            <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                <li><input type="checkbox"  v-model="formData.name"> Name</li>
                                                <li><input type="checkbox"  v-model="formData.id"> System ID</li>
                                                <li><input type="checkbox"  v-model="formData.sex"> Gender</li>
                                                <li><input type="checkbox"  v-model="formData.breeder"> Is Breeder
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.lastSeen"> Last Seen Date
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.studid"> Stud ID</li>
                                                <li><input type="checkbox"  v-model="formData.newstudid"> New Stud ID
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.nfcRingAssigned">Has NFC Ring
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.nfcRing">NFC Ring Printed ID
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.lring">Left Ring ID
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.rring"> Right Ring ID
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.creator"> Created By
                                                </li>
                                            </ul>
                                        </td>
                                        <td>
                                            <div style="font-weight:bold; text-align: center;">Bird Parentage Data</div>
                                            <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                <li><input type="checkbox"  v-model="formData.mname"> Mother
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.mstud"> Mother Stud ID</li>
                                                <li><input type="checkbox"  v-model="formData.fname"> Father
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.fstud"> Father Stud ID</li>
                                                <li><input type="checkbox"  v-model="formData.sfname"> Second Father
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.sfstud"> Second Father Stud ID</li>
                                            </ul>
                                        </td>
                                        <td>
                                            <div style="font-weight:bold; text-align:center;">Bird Status Data</div>
                                            <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                <li><input type="checkbox"  v-model="formData.status"> Status</li>
                                                <li><input type="checkbox"  v-model="formData.cnote"> Condition</li>
                                                <li><input type="checkbox"  v-model="formData.rnote"> Note</li>
                                                <li><input type="checkbox"  v-model="formData.age"> Age</li>
                                            </ul>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div style="font-weight:bold; text-align:center;">Bird Creation Data</div>
                                            <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                <li><input type="checkbox"  v-model="formData.lay"> Lay Date</li>
                                                <li><input type="checkbox"  v-model="formData.laidwhere"> Laid Where
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.hatchdate"> Hatch Date
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.hatchwhere"> Hatched Where
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.incdays"> Incubation Days
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.fledgedate"> Fledge Date
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.fledgewhere"> Fledged Where
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.releasedate"> Release Date
                                                </li>
                                                <li><input type="checkbox"  v-model="formData.releasedwhere"> Released Where</li>

                                            </ul>
                                        </td>
                                        <td>
                                            <div style="font-weight:bold; text-align:center;">Nest Site Data</div>
                                            <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                <li style="font-weight:bold;"> Current Breeding Site</li>
                                                <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                    <li><input type="checkbox"  v-model="formData.currnestID":disabled="formData.currnestDist || formData.currnestDisc || formData.currnestCord"> Name </li>
                                                    <li><input type="checkbox"  v-model="formData.currnestDist"> Distance to Hopper (km)</li>
                                                    <li><input type="checkbox"  v-model="formData.currnestDisc"> Description</li>
                                                    <li><input type="checkbox"  v-model="formData.currnestCord">Coordinates</li>

                                                    <!-- <li><input type="checkbox"  v-model="formData.currnestLat">Latitude</li>   -->
                                                </ul>
                                                <li style="font-weight:bold;">Previous Breeding Site</li>
                                                <ul style="text-align:left; list-style-type:none;padding-left: 0;" id="privilege" width="100%">
                                                    <li><input type="checkbox"  v-model="formData.prevnestID":disabled="formData.prevnestDist || formData.prevnestDisc || formData.prevnestCord"> Name</li>
                                                    <li><input type="checkbox"  v-model="formData.prevnestDist"> Distance to Hopper (km)</li>
                                                    <li><input type="checkbox"  v-model="formData.prevnestDisc"> Description</li>
                                                    <li><input type="checkbox"  v-model="formData.prevnestCord">Coordinates</li>

                                                    <!-- <li><input type="checkbox"  v-model="formData.prevnestLat">Latitude</li> -->
                                                </ul>
                                            </ul>
                                        </td>
                                    </tr>
                            </table>
                        </div>
                        <div class="modal-footer flex-row-reverse justify-content-between">
                            <div id="createControls" class="flex-row-reverse form-group">
                                <button class="btn btn-secondary" data-dismiss="modal">Save & Close</button>
                                <button class="btn btn-secondary" @click="resetColumns">Reset To Default</button>
                                <button class="btn btn-secondary" @click="allColumns">Select All</button>
                            </div>
                            <button type="button" data-dismiss="modal" class="btn btn-outline-info" @click="resetToStartState">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <modal id="singleViewModal" class="example-modal" v-if="modal==='example3'" v-cloak>
            <div class="modal-header">
                <h2 v-if="!isEditMode" class="modal-title">View Bird - {{currentBird.birdName}}</h2>
                <h2 v-else class="modal-title">Edit Bird - {{currentBird.birdName}}</h2>
                <hr />
                <button type="button" class="modal-close-button" @click="closeSingleViewModal" aria-label="Close"></button>
            </div>
            <ajax-form action="editBird" :syncing.sync="syncing" :cloud-error.sync="cloudError" @submitted="submittedFormEdit()" :handle-parsing="handleParsingFormEdit" autocomplete="off">
                <table class="table">
                    <tr>
                        <td style="width:50%;">
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>Main Information</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table class="col-sm-6">
                                            <tr>
                                                <td style="white-space: nowrap">Bird Name</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.birdName }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="birdNameEdit" type="text" class="form-control" placeholder="Bird Name" title="Bird Name" :class="[editBirdErrors.birdName ? 'is-invalid' : '']" v-model.trim="editBirdData.birdName">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.birdName">Please provide a valid & unique Bird Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Last Seen Date</td>
                                                <td style="text-align:right">
                                                    {{currentBird.visitHistory[0] ? new Date(currentBird.visitHistory[0].createdAt *1000).toLocaleDateString('en-GB') : '' }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Age</td>
                                                <td style="text-align:right">{{currentBird.age}}</td>
                                            </tr>
                                            <tr>
                                                <td>NFC Ring ID</td>
                                                <td style="text-align:right" v-if="!isEditMode">
                                                    {{ currentBird.nfcRingID ? currentBird.nfcRingID : '' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="nfcRingIDEdit" type="text" class="form-control" placeholder="NFC Ring ID" title="NFC Ring ID" :class="[editBirdErrors.nfcRingID ? 'is-invalid' : '']" v-model.trim="editBirdData.nfcRingID">
                                                        <autocomplete for="nfcRingIDEdit" action="getRfid" params='{"limit": 5}' map="nfcRFID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.nfcRingID">This ring either doesn't exist or has already been assigned.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Stud ID</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.studID }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="studIdEdit" type="text" class="form-control" placeholder="Stud Id" title="Stud Id" :class="[editBirdErrors.studID ? 'is-invalid' : '']" v-model.trim="editBirdData.studID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.studID">Please provide a valid studId.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>New Stud ID</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.newStudID }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="newStudIdEdit" type="text" class="form-control" placeholder="New Stud Id" title="New Stud Id" :class="[editBirdErrors.newStudID ? 'is-invalid' : '']" v-model.trim="editBirdData.newStudID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.newStudID">Please provide a valid New Stud Id.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Right Ring ID</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.rightRingID }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="rightRingIdEdit" type="text" class="form-control" placeholder="Right Ring ID" title="Right Ring ID" :class="[editBirdErrors.rightRingID ? 'is-invalid' : '']" v-model.trim="editBirdData.rightRingID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.rightRingID">Please provide a valid Right Ring Id.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Left Ring ID</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.leftRingID }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="leftRingIDEdit" type="text" class="form-control" placeholder="Left Ring ID" title="Left Ring ID" :class="[editBirdErrors.leftRingID? 'is-invalid' : '']" v-model.trim="editBirdData.leftRingID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.leftRingID">Please provide a valid Left Ring Id.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Group Name</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.groupName }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="groupNameEdit" type="text" class="form-control" placeholder="Group Name" title="Group Name" :class="[editBirdErrors.groupName ? 'is-invalid' : '']" v-model.trim="editBirdData.groupName">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.groupName">Please provide a valid Group Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Gender</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.sex }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <select id="sexEdit" class="form-control" :class="[editBirdErrors.sex ? 'is-invalid' : '']" v-model.trim="editBirdData.sex">
                                             <option value="male">Male</option>
                                             <option value="female">Female</option>
                                             <option selected value="unknown">Unknown</option>
                                          </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Is breeder?</td>
                                                <td style="text-align:right" v-if="!isEditMode">
                                                    {{ currentBird.isBreeder ? currentBird.isBreeder : 'Unknown' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <select id="isBreederEdit" class="form-control" :class="[editBirdErrors.isBreeder ? 'is-invalid' : '']" v-model.trim="editBirdData.isBreeder">
                                             <option value="yes">Yes</option>
                                             <option value="no">No</option>
                                             <option selected value="unknown">Unknown</option>
                                          </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Status</td>
                                                <td style="text-align:right" v-if="!isEditMode">
                                                    {{ currentBird.status ? currentBird.status : 'Unknown' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <select id="statusEdit" class="form-control" :class="[editBirdErrors.status ? 'is-invalid' : '']" v-model.trim="editBirdData.status">
                                             <option selected value="alive">Alive</option>
                                             <option value="dead">Dead</option>
                                             <option value="missing">Missing</option>
                                          </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Condition</td>
                                                <td style="text-align:right;">
                                                    <div>
                                                        {{currentBird.conditionHistory[0] ? currentBird.conditionHistory[0].birdCondition : '' }}
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr v-if="isEditMode">
                                                <td>New Condition</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="newCondition" type="text" class="form-control" placeholder="New Condition" title="New Condition" :class="[(editBirdErrors.newCondition || editBirdErrors.conditionDate) ? 'is-invalid' : '']" v-model.trim="editBirdData.newCondition">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.conditionDate">Please provide a valid date for the New Condition.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr v-if="isEditMode && editBirdData.newCondition && editBirdData.newCondition !== ''">
                                                <td>Date of Condition</td>
                                                <td style="text-align:right">
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="newConditionDate" class="form-control" v-model="editBirdData.newConditionDate" :class="[editBirdErrors.conditionDate ? 'is-invalid' : '']" placeholder="Date of Condition" title="Date of Condition" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <div style="padding:5px 0px!important;" class="container">
                                                        <button style="margin-bottom: 5px;" type="button" class="btn btn-info btn-block" data-toggle="collapse" data-target=".condition-history">+ Condition History</button>
                                                        <div class="form-group collapse condition-history">
                                                            <table class="table" v-for="condition in currentBird.conditionHistory">
                                                                <tr>
                                                                    <td>
                                                                        {{new Date(condition.dateNoted*1000).toLocaleDateString('en-GB') }}
                                                                    </td>
                                                                    <td>
                                                                        {{condition.birdCondition }}
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>More Information</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table align="center" style="max-width: 90% !important;" class="col-sm-6">
                                            <tr>
                                                <td>Where Laid</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{currentBird.laidWhere ? currentBird.laidWhere.nestID : '' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="laidWhereEdit" type="text" class="form-control" placeholder="Where Laid" title="Where Laid" :class="[editBirdErrors.laidWhere ? 'is-invalid' : '']" v-model.trim="editBirdData.laidWhere">
                                                        <autocomplete for="laidWhereEdit" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.laidWhere">Please provide a valid value for Where Laid.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Lay Date</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{new Date(currentBird.layDate*1000).toLocaleDateString('en-GB') }}</td>
                                                <td v-else>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="layDate" class="form-control" v-model="editBirdData.layDate" placeholder="Lay date" title="Lay date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Where Hatched</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{currentBird.hatchedWhere ? currentBird.hatchedWhere.nestID : '' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="hatchedWhereEdit" type="text" class="form-control" placeholder="Where Hatched" title="Where Hatched" :class="[editBirdErrors.hatchedWhere ? 'is-invalid' : '']" v-model.trim="editBirdData.hatchedWhere">
                                                        <autocomplete for="hatchedWhereEdit" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.hatchedWhere">Please provide a valid value for Where Hatched.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Hatch Date</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{new Date(currentBird.hatchDate*1000).toLocaleDateString('en-GB') }}</td>
                                                <td v-else>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="hatchDate" class="form-control" v-model="editBirdData.hatchDate" placeholder="Hatch date" title="Hatch date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Where Fledged</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{currentBird.fledgedWhere ? currentBird.fledgedWhere.nestID : '' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="fledgedWhereEdit" type="text" class="form-control" placeholder="Where Fledged" title="Where Fledged" :class="[editBirdErrors.fledgedWhere ? 'is-invalid' : '']" v-model.trim="editBirdData.fledgedWhere">
                                                        <autocomplete for="fledgedWhereEdit" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.fledgedWhere">Please provide a valid value for Where Fledged.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Fledge Date</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{new Date(currentBird.fledgeDate*1000).toLocaleDateString('en-GB') }}</td>
                                                <td v-else>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="fledgeDate" class="form-control" v-model="editBirdData.fledgeDate" placeholder="Fledge date" title="Fledge date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="white-space: nowrap">Incubation Days</td>
                                                <td style="text-align:right" v-if="!isEditMode">{{ currentBird.incubationDays }}
                                                </td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="incubationDays" type="number" class="form-control" placeholder="Incubation days" title="Incubation days" :class="[editBirdErrors.incubationDays ? 'is-invalid' : '']" v-model.trim="editBirdData.incubationDays">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.incubationDays">Please provide a valid value for Incubation Days.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Where Released</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{currentBird.releasedWhere ? currentBird.releasedWhere.nestID : '' }}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="releasedWhereEdit" type="text" class="form-control" placeholder="Where Released" title="Where Released" :class="[editBirdErrors.releasedWhere ? 'is-invalid' : '']" v-model.trim="editBirdData.releasedWhere">
                                                        <autocomplete for="releasedWhereEdit" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.releasedWhere">Please provide a valid value for Where Released.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Release Date</td>
                                                <td v-if="!isEditMode" style="text-align:right">
                                                    {{new Date(currentBird.releasedWhen*1000).toLocaleDateString('en-GB') }}</td>
                                                <td v-else>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="releasedWhen" class="form-control" v-model="editBirdData.releasedWhen" placeholder="Release Date" title="Release Date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Current Breeding Site</td>
                                                <td style="text-align:right">
                                                    {{currentBird.nestsiteHistory && currentBird.nestsiteHistory[0] ? currentBird.nestsiteHistory[0].nestID.nestID : '' }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="white-space: nowrap">Distance To Hopper</td>
                                                <td style="text-align:right">
                                                    {{currentBird.nestsiteHistory && currentBird.nestsiteHistory[0] ? currentBird.nestsiteHistory[0].nestID.distanceToHoppersKm : '' }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="white-space: nowrap">Previous Breeding Site</td>
                                                <td style="text-align:right">
                                                    {{currentBird.nestsiteHistory && currentBird.nestsiteHistory[1] ? currentBird.nestsiteHistory[1].nestID.nestID : '' }}
                                                </td>
                                            </tr>
                                            <tr v-if="isEditMode">
                                                <td>New Breeding Site</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="newBreedingSite" type="text" class="form-control" placeholder="New Breeding Site" title="New Breeding Site" :class="[(editBirdErrors.newBreedingSite || editBirdErrors.newBreedingSiteDate) ? 'is-invalid' : '']" v-model.trim="editBirdData.newBreedingSite">
                                                        <autocomplete for="newBreedingSite" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.newBreedingSite">Please provide a valid New Breeding Site.</div>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.newBreedingSiteDate">Please provide a valid New Breeding Site Date.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr v-if="isEditMode && editBirdData.newBreedingSite && editBirdData.newBreedingSite !== ''">
                                                <td>Date New Breeding Site Registered</td>
                                                <td style="text-align:right">
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="newBreedingSiteDate" class="form-control" v-model="editBirdData.newBreedingSiteDate" :class="[editBirdErrors.newBreedingSiteDate ? 'is-invalid' : '']" placeholder="Date New Breeding Site Registered" title="Date New Breeding Site Registered"
                                                            :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Notes</td>
                                                <td style="text-align:right; height:90px; " v-if="!isEditMode">
                                                    <div style="overflow-y:scroll; height:90px;">{{currentBird.researcherNotes }}
                                                    </div>
                                                </td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <textarea id="researcherNotes" class="form-control" placeholder="Researcher Notes" title="Researcher Notes" :class="[editBirdErrors.researcherNotes ? 'is-invalid' : '']" v-model.trim="editBirdData.researcherNotes"></textarea>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.researcherNotes">Please provide valid Researcher Notes.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Created by</td>
                                                <td style="text-align:right">{{ currentBird.createdBy.fullName }}</td>
                                            </tr>
                                            <tr>
                                                <td>Created on</td>
                                                <td style="text-align:right">
                                                    {{new Date (currentBird.createdAt*1000).toLocaleDateString('en-GB') }}</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="width:50%;">
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>Parents</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table style="max-width: 90% !important;" class="col-sm-6">
                                            <tr>
                                                <td>Mother</td>
                                                <td v-if="!isEditMode" style="text-align:right">{{currentBird.motherName}}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="motherName" type="text" class="form-control" placeholder="Mother" title="Mother" :class="[editBirdErrors.motherName ? 'is-invalid' : '']" v-model.trim="editBirdData.motherName">
                                                        <autocomplete for="motherName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.motherName">Please provide a valid value for Mother Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Mother Stud ID</td>
                                                <td v-if="!isEditMode" style="text-align:right">{{currentBird.motherStudID}}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="motherStudID" type="text" class="form-control" placeholder="Mother Stud ID" title="Mother Stud ID" :class="[editBirdErrors.motherStudID ? 'is-invalid' : '']" v-model.trim="editBirdData.motherStudID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.motherStudID">Please provide a valid value for Mother Stud ID.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Father</td>
                                                <td v-if="!isEditMode" style="text-align:right">{{currentBird.fatherName}}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="fatherName" type="text" class="form-control" placeholder="Father" title="Father" :class="[editBirdErrors.fatherName ? 'is-invalid' : '']" v-model.trim="editBirdData.fatherName">
                                                        <autocomplete for="fatherName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.fatherName">Please provide a valid value for Father Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Father Stud ID</td>
                                                <td v-if="!isEditMode" style="text-align:right">{{currentBird.fatherStudID}}</td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="fatherStudID" type="text" class="form-control" placeholder="Father Stud ID" title="Father Stud ID" :class="[editBirdErrors.fatherStudID ? 'is-invalid' : '']" v-model.trim="editBirdData.fatherStudID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.fatherStudID">Please provide a valid value for Father Stud ID.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2nd Father</td>
                                                <td v-if="!isEditMode" style="text-align:right">{{currentBird.secondFatherName}}
                                                </td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="secondFatherName" type="text" class="form-control" placeholder="2nd Potential Father" title="2nd Potential Father" :class="[editBirdErrors.secondFatherName ? 'is-invalid' : '']" v-model.trim="editBirdData.secondFatherName">
                                                        <autocomplete for="secondFatherName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="editBirdErrors.secondFatherName">Please provide a valid value for 2nd Potential Father.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2nd Father Stud ID</td>
                                                <td v-if="!isEditMode" style="text-align:right">{{currentBird.secondFatherStudID}}
                                                </td>
                                                <td style="text-align:right" v-else>
                                                    <div class="form-group">
                                                        <input id="secondFatherStudID" type="text" class="form-control" placeholder="2nd Potential Father Stud ID" title="2nd Potential Father Stud ID" :class="[editBirdErrors.secondFatherStudID ? 'is-invalid' : '']" v-model.trim="editBirdData.secondFatherStudID">
                                                        <div class="invalid-feedback" v-if="editBirdErrors.secondFatherStudID">Please provide a valid value for 2nd Father Stud ID.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>Past Visits</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table align="center" style="max-width: 90% !important;" class="col-sm-6">
                                            <tr>
                                                <td style="background-color: rgb(131, 203, 215)">Date</td>
                                            </tr>
                                            <tr v-for="visits in currentBird.visitHistory">
                                                <td>{{new Date(visits.createdAt*1000).toLocaleDateString('en-GB') }}</td>
                                            </tr>
                                        </table>
                                        <div>
                                            <paginate :page-count="Math.ceil(visitCount / visitPageSize)" :click-handler="visitPageClick" :prev-text="'Prev'" :next-text="'Next'" :container-class="'pagination'" :page-class="'page-item'" :page-link-class="'page-link'" :prev-class="'ignore page-item'"
                                                :prev-link-class="'page-link'" :next-class="'ignore page-item'" :next-link-class="'page-link'" :disabled-class="'ignore disabled'">
                                            </paginate>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </td>
                    </tr>
                </table>
                <lock :user="me.id" v-if="isEditMode" :action="'editBird'+currentBird.id" :run-on-failed="exitEditMode">
                </lock>
                <p class="text-danger" v-if="cloudError"><small>An error occured while processing your request. Please check
                  your information and try again, or <a href="/support">contact support</a> if the error
                  persists.</small></p>
                <div class="modal-footer flex-row-reverse justify-content-between">
                    <a class="btn btn-info " v-if="!isEditMode && canEditThisBird()" @click="enterEditMode">Edit</a>
                    <div id="editControls" class="flex-row-reverse form-group">
                        <a class="btn btn-info " v-if="isEditMode" @click="exitEditMode">Discard changes</a>
                        <ajax-button type="submit" v-if="isEditMode" :syncing="syncing" class="btn-dark btn">Save
                        </ajax-button>
                    </div>
                    <button type="button" @click="closeSingleViewModal()" class="btn btn-outline-info">Cancel</button>
                </div>
            </ajax-form>
        </modal>
        <modal id="createBirdModal" class="example-modal" v-if="modal==='createBirdModal'" v-cloak>
            <div class="modal-header">
                <h2 class="modal-title">Register New Bird</h2>
                <hr />
                <button type="button" class="modal-close-button" @click="closeCreateBirdModal(true)" aria-label="Close"></button>
            </div>
            <ajax-form action="createBird" :syncing.sync="syncing" :cloud-error.sync="cloudError" @submitted="submittedFormCreate()" :handle-parsing="handleParsingFormCreate" autocomplete="off">
                <table class="table">
                    <tr>
                        <td style="width:50%;">
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>Main Information</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table class="col-sm-6">
                                            <tr>
                                                <td style="white-space: nowrap">Bird Name</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="birdNameCreate" type="text" class="form-control" placeholder="Bird Name" title="Bird Name" :class="[createBirdErrors.birdName ? 'is-invalid' : '']" v-model.trim="createBirdData.birdName">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.birdName">Please provide a valid & unique Bird Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>NFC Ring ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="nfcRingIDCreate" type="text" class="form-control" placeholder="NFC Ring ID" title="NFC Ring ID" :class="[createBirdErrors.nfcRingID ? 'is-invalid' : '']" v-model.trim="createBirdData.nfcRingID">
                                                        <autocomplete for="nfcRingIDCreate" action="getRfid" params='{"limit": 5, "assignedStatus": false}' map="nfcRFID" is-async>
                                                        </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.nfcRingID">This ring either doesn't exist or has already been assigned.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Stud ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="studIdCreate" type="text" class="form-control" placeholder="Stud Id" title="Stud Id" :class="[createBirdErrors.studID ? 'is-invalid' : '']" v-model.trim="createBirdData.studID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.studID">Please provide a valid studId.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>New Stud ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="newStudIdCreate" type="text" class="form-control" placeholder="New Stud Id" title="New Stud Id" :class="[createBirdErrors.newStudID ? 'is-invalid' : '']" v-model.trim="createBirdData.newStudID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.newStudID">Please provide a valid New Stud Id.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Right Ring ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="rightRingIdCreate" type="text" class="form-control" placeholder="Right Ring ID" title="Right Ring ID" :class="[createBirdErrors.rightRingID ? 'is-invalid' : '']" v-model.trim="createBirdData.rightRingID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.rightRingID">Please provide a valid Right Ring Id.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Left Ring ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="leftRingIDCreate" type="text" class="form-control" placeholder="Left Ring ID" title="Left Ring ID" :class="[createBirdErrors.leftRingID? 'is-invalid' : '']" v-model.trim="createBirdData.leftRingID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.leftRingID">Please provide a valid Left Ring Id.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Group Name</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="groupNameCreate" type="text" class="form-control" placeholder="Group Name" title="Group Name" :class="[createBirdErrors.groupName ? 'is-invalid' : '']" v-model.trim="createBirdData.groupName">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.groupName">Please provide a valid Group Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Gender</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <select id="sexCreate" class="form-control" :class="[createBirdErrors.sex ? 'is-invalid' : '']" v-model.trim="createBirdData.sex">
                                             <option value="male">Male</option>
                                             <option value="female">Female</option>
                                             <option selected value="unknown">Unknown</option>
                                          </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Is breeder?</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <select id="isBreederCreate" class="form-control" :class="[createBirdErrors.isBreeder ? 'is-invalid' : '']" v-model.trim="createBirdData.isBreeder">
                                             <option value="yes">Yes</option>
                                             <option value="no">No</option>
                                             <option selected value="unknown">Unknown</option>
                                          </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Status</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <select id="statusCreate" class="form-control" :class="[createBirdErrors.status ? 'is-invalid' : '']" v-model.trim="createBirdData.status">
                                             <option selected value="alive">Alive</option>
                                             <option value="dead">Dead</option>
                                             <option value="missing">Missing</option>
                                          </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Condition</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="newCondition" type="text" class="form-control" placeholder="New Condition" title="New Condition" :class="[(createBirdErrors.newCondition || createBirdErrors.conditionDate) ? 'is-invalid' : '']" v-model.trim="createBirdData.newCondition">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.conditionDate">Please provide a valid date for the Condition.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr v-if="createBirdData.newCondition && createBirdData.newCondition !== ''">
                                                <td>Date of Condition</td>
                                                <td style="text-align:right">
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="newConditionDate" class="form-control" v-model="createBirdData.newConditionDate" :class="[createBirdErrors.conditionDate ? 'is-invalid' : '']" placeholder="Date of Condition" title="Date of Condition" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>More Information</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table align="center" style="max-width: 90% !important;" class="col-sm-6">
                                            <tr>
                                                <td>Where Laid</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="laidWhereCreate" type="text" class="form-control" placeholder="Where Laid" title="Where Laid" :class="[createBirdErrors.laidWhere ? 'is-invalid' : '']" v-model.trim="createBirdData.laidWhere">
                                                        <autocomplete for="laidWhereCreate" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.laidWhere">Please provide a valid Nest Site for Where Laid.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Lay Date</td>
                                                <td>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="layDate" class="form-control" v-model="createBirdData.layDate" placeholder="Lay date" title="Lay date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Where Hatched</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="hatchedWhereCreate" type="text" class="form-control" placeholder="Where Hatched" title="Where Hatched" :class="[createBirdErrors.hatchedWhere ? 'is-invalid' : '']" v-model.trim="createBirdData.hatchedWhere">
                                                        <autocomplete for="hatchedWhereCreate" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.hatchedWhere">Please provide a valid Nest Site for Where Hatched.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Hatch Date</td>
                                                <td>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="hatchDate" class="form-control" v-model="createBirdData.hatchDate" placeholder="Hatch date" title="Hatch date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Where Fledged</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="fledgedWhereCreate" type="text" class="form-control" placeholder="Where Fledged" title="Where Fledged" :class="[createBirdErrors.fledgedWhere ? 'is-invalid' : '']" v-model.trim="createBirdData.fledgedWhere">
                                                        <autocomplete for="fledgedWhereCreate" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.fledgedWhere">Please provide a valid value for Where Fledged.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Fledge Date</td>
                                                <td>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="fledgeDateCreate" class="form-control" v-model="createBirdData.fledgeDate" placeholder="Fledge date" title="Fledge date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="white-space: nowrap">Incubation Days</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="incubationDaysCreate" type="number" class="form-control" placeholder="Incubation days" title="Incubation days" :class="[createBirdErrors.incubationDays ? 'is-invalid' : '']" v-model.trim="createBirdData.incubationDays">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.incubationDays">Please provide a valid number of Incubation Days.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Where Released</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="releasedWhereCreate" type="text" class="form-control" placeholder="Where Released" title="Where Released" :class="[createBirdErrors.releasedWhere ? 'is-invalid' : '']" v-model.trim="createBirdData.releasedWhere">
                                                        <autocomplete for="releasedWhereCreate" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.releasedWhere">Please provide a valid Nest Site for Where Released.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Release Date</td>
                                                <td>
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="releasedWhen" class="form-control" v-model="createBirdData.releasedWhen" placeholder="Release Date" title="Release Date" :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Breeding Site</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="newBreedingSiteCreate" type="text" class="form-control" placeholder="Breeding Site" title="Breeding Site" :class="[(createBirdErrors.newBreedingSite || createBirdErrors.newBreedingSiteDate) ? 'is-invalid' : '']" v-model.trim="createBirdData.newBreedingSite">
                                                        <autocomplete for="newBreedingSiteCreate" action="getNestsite" params='{"limit": 5}' map="nestID" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.newBreedingSite">Please provide a valid Breeding Site.</div>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.newBreedingSiteDate">
                                                            Please provide a valid Breeding Site Date.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr v-if="createBirdData.newBreedingSite && createBirdData.newBreedingSite !== ''">
                                                <td>Date Breeding Site Registered</td>
                                                <td style="text-align:right">
                                                    <div class="form-group datepicker-group">
                                                        <datepicker id="newBreedingSiteDateCreate" class="form-control" v-model="createBirdData.newBreedingSiteDate" :class="[createBirdErrors.newBreedingSiteDate ? 'is-invalid' : '']" placeholder="Date Breeding Site Registered" title="Date Breeding Site Registered"
                                                            :config="datepickerOptions">
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Notes</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <textarea id="researcherNotesCreate" class="form-control" placeholder="Researcher Notes" title="Researcher Notes" :class="[createBirdErrors.researcherNotes ? 'is-invalid' : '']" v-model.trim="createBirdData.researcherNotes"></textarea>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.researcherNotes">Please provide valid Researcher Notes.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="width:50%;">
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>Parents</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table style="max-width: 90% !important;" class="col-sm-6">
                                            <tr>
                                                <td>Mother</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="motherNameCreate" type="text" class="form-control" placeholder="Mother" title="Mother" :class="[createBirdErrors.motherName ? 'is-invalid' : '']" v-model.trim="createBirdData.motherName">
                                                        <autocomplete for="motherName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.motherName">Please provide a valid value for Mother Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Father</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="fatherNameCreate" type="text" class="form-control" placeholder="Father" title="Father" :class="[createBirdErrors.fatherName ? 'is-invalid' : '']" v-model.trim="createBirdData.fatherName">
                                                        <autocomplete for="fatherName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.fatherName">Please provide a valid value for Father Name.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2nd Father</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="secondFatherNameCreate" type="text" class="form-control" placeholder="2nd Potential Father" title="2nd Potential Father" :class="[createBirdErrors.secondFatherName ? 'is-invalid' : '']" v-model.trim="createBirdData.secondFatherName">
                                                        <autocomplete for="secondFatherName" action="getBird" params='{"limit": 5}' map="birdName" is-async> </autocomplete>
                                                        <div class="invalid-feedback" v-if="createBirdErrors.secondFatherName">Please provide a valid value for 2nd Potential Father.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="modal-body">
                                <div class="container">
                                    <div class="row mb-3">
                                        <div class="col-sm-6">
                                            <h4>&nbsp;</h4>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <table align="center" style="max-width: 90% !important;" class="col-sm-6">
                                            <tr>
                                                <td>Mother Stud ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="motherStudIDCreate" type="text" class="form-control" placeholder="Mother Stud ID" title="Mother Stud ID" :class="[createBirdErrors.motherStudID ? 'is-invalid' : '']" v-model.trim="createBirdData.motherStudID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.motherStudID">Please provide a valid value for Mother Stud ID.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Father Stud ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="fatherStudIDCreate" type="text" class="form-control" placeholder="Father Stud ID" title="Father Stud ID" :class="[createBirdErrors.fatherStudID ? 'is-invalid' : '']" v-model.trim="createBirdData.fatherStudID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.fatherStudID">Please provide a valid value for Father Stud ID.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2nd Father Stud ID</td>
                                                <td style="text-align:right">
                                                    <div class="form-group">
                                                        <input id="secondFatherStudIDCreate" type="text" class="form-control" placeholder="2nd Potential Father Stud ID" title="2nd Potential Father Stud ID" :class="[createBirdErrors.secondFatherStudID ? 'is-invalid' : '']" v-model.trim="createBirdData.secondFatherStudID">
                                                        <div class="invalid-feedback" v-if="createBirdErrors.secondFatherStudID">
                                                            Please provide a valid value for 2nd Father Stud ID.</div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </td>
                    </tr>
                </table>
                <p class="text-danger" v-if="cloudError"><small>An error occured while processing your request. Please check
                  your information and try again, or <a href="/support">contact support</a> if the error
                  persists.</small></p>
                <div class="modal-footer flex-row-reverse justify-content-between">
                    <div id="createControls" class="flex-row-reverse form-group">
                        <ajax-button type="submit" :syncing="syncing" class="btn-dark btn">Save</ajax-button>
                    </div>
                    <button type="button" @click="closeCreateBirdModal(true)" class="btn btn-outline-info">Cancel</button>
                </div>
            </ajax-form>
        </modal>
        <div class="modal fade" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="editUserModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm modal-dialog-centered">
                <div class="modal-content" style="overflow-x: scroll;overflow-y: hidden;width: 100% ;white-space: nowrap;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editUserModalLabel">All Birds</h5>
                        <button type="button" class="close" @click="exitEditMode" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
                    </div>
                    <div class="flex-container filterbar">
                        <div class="form-group search-box" v-if="formData.status">
                            <input id="status" class="form-control" type="text" v-model.trim="currentStatusFilter" placeholder="status" title="status" autocomplete="off">
                            <autocomplete for="status" action="getBird" params='{"limit": 5}' map="status" is-async>
                            </autocomplete>
                        </div>
                    </div>
                    <table class="table table-bordered table-condensed table-hover">
                        <thead role="rowgroup">
                            <tr class="birdheader back-green" role="row">
                                <th role="columnheader" v-if="formData.birdName">Bird Name</th>
                                <th role="columnheader" v-if="formData.status">Status</th>
                                <th role="columnheader" v-if="formData.lastSeenDate">Last Seen Date</td>
                                    <th role="columnheader" v-if="formData.currentNestSite">Current Breeding Site</th>
                                    <th role="columnheader" v-if="formData.PreviousNestSite">Previous Breeding Site</th>
                                    <th role="columnheader" v-if="formData.birdID">Bird ID</th>
                                    <th role="columnheader" v-if="formData.studId">Stud ID</th>
                                    <th role="columnheader" v-if="formData.newStudId">New Stud ID</th>
                                    <th role="columnheader" v-if="formData.rightRingId">Right Ring ID</th>
                                    <th role="columnheader" v-if="formData.leftRingId">Left Ring ID</th>
                                    <th role="columnheader" v-if="formData.groupName">Group Name</th>
                                    <th role="columnheader" v-if="formData.sex">Gender</th>
                                    <th role="columnheader" v-if="formData.currentCondition">Current Condition</th>
                                    <th role="columnheader" v-if="formData.motherName">Mother</th>
                                    <th role="columnheader" v-if="formData.fatherName">Father</th>
                                    <th role="columnheader" v-if="formData.secondFatherName">Second Father</th>
                                    <th role="columnheader" v-if="formData.age">Age</th>
                                    <th role="columnheader">Breeder</th>
                                    <th role="columnheader" v-if="formData.DistanceToHopper">Distance To Hopper</th>
                            </tr>
                        </thead>
                        <tbody role="rowgroup">
                            <tr v-for="(bird, index) in currentBirds">
                                <td class="birdJustifyColumn" v-if="formData.birdName">{{bird.birdName}}</td>
                                <td v-if="formData.status">{{bird.status ? bird.status : 'Unknown' }}</td>
                                <td v-if="formData.lastSeenDate">
                                    {{bird.visitHistory[0] ? new Date(bird.visitHistory[0].createdAt *1000).toLocaleDateString('en-GB') : '' }}
                                </td>
                                <td v-if="formData.currentNestSite">
                                    {{bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.nestID : '' }}
                                </td>
                                <td v-if="formData.PreviousNestSite">
                                    {{bird.nestsiteHistory && bird.nestsiteHistory[1] && bird.nestsiteHistory[1].nestID ? bird.nestsiteHistory[1].nestID.nestID : '' }}
                                </td>
                                <td v-if="formData.birdID">{{bird.id}}</td>
                                <td v-if="formData.studId">{{bird.studID}}</td>
                                <td v-if="formData.newStudId">{{bird.newStudID}}</td>
                                <td v-if="formData.rightRingId">{{bird.rightRingID}}</td>
                                <td v-if="formData.leftRingId">{{bird.leftRingID}}</td>
                                <td v-if="formData.groupName">{{bird.groupName}}</td>
                                <td v-if="formData.sex">{{bird.sex}}</td>
                                <td v-if="formData.currentCondition">
                                    {{bird.conditionHistory[0] ? bird.conditionHistory[0].birdCondition : '' }}</td>
                                <td v-if="formData.motherName">{{bird.motherName}}</td>
                                <td v-if="formData.fatherName">{{bird.fatherName}}</td>
                                <td v-if="formData.secondFatherName">{{bird.secondFatherName}}</td>
                                <td v-if="formData.age">{{bird.age}}</td>
                                <td>{{bird.isBreeder}}</td>
                                <td v-if="formData.DistanceToHopper">
                                    {{bird.nestsiteHistory && bird.nestsiteHistory[0] && bird.nestsiteHistory[0].nestID ? bird.nestsiteHistory[0].nestID.distanceToHoppersKm : '' }}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<%- /* Expose locals as `window.SAILS_LOCALS` :: */ exposeLocalsToBrowser() %>